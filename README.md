# 1. 需求
使用c++实现⼀个 key-value 容器，key 唯⼀，⽀持插入、删除、修改、读取，内部保证线程安全，考虑该容器在⾼并发场景下使⽤，可以使⽤c++标准容器库或⾃⼰实现相关数据结构。同时拥有以下功能：
**功能⼀、为容器内数据添加时间戳，并管理数据**
使⽤场景：滑动窗⼝，在数据实时变化的容器中，只对某⼀时间段内发⽣变化的数据进⾏操作，删除掉不活跃的数据要求：

1. ⽀持记录数据变化的时间戳(单位ms) 
2. ⽀持删除和获取某个时间范围内的数据，并可以以时间戳的⼤⼩为顺序获取数据； 如：获取时间戳1650443000000ms - 1650443001000ms 内的所有数据，并以时间戳⼤⼩从⼤到⼩排序/从⼩到⼤排序
3. ⽀持删除时间戳最⼤或最⼩的前 N 条数据，获取时间戳最⼤或最⼩的 N 条数据，并可以以时间戳的⼤⼩为顺序排序； 
4. . ⽀持设置数据过期时间，数据过期后⾃动删除数据，即：数据在过期时间内未进⾏插入和修改操作则删除数据 如：设置过期时间为 10s，则数据在 10s 内未发⽣插入或修改操作，10s 后删除该数据
# 2. 实现
## 2.1 KeyValue
一个存储key-value的类型，除了存储key, value 以外, 还存储了插入时间 insert_time, 过期时间 expire_time, 是否被删除的标志 is_delete
当我们因为各种原因删除了一个KeyValue时，实际上并没有进行删除操作，只是把删除标志 is_delete 设置为了 false，这样设计是为了实现延时删除
## 2.2 SafeMap

- _data_map 存储对应的key-value
- _min_expire_heap 最小堆存储KeyValue, 根据expire_time从小到大排序
- _queue 双端队列, 按照insert_time从小到大存储
# 3. 编译&运行
```shell
mkdir build && cd build
cmake ..
make -j
./build/src/main
```